<main>
    <div class="container">
        <div class="row">
            <div class="col-md-3">
                <img class="rounded mx-auto img-fluid" src="{{picture}}" alt="{{name}}">
                <h1>{{name}}, {{age}}</h1>
                <h2>{{#if breed}}{{breed}} | {{/if}}{{type}}</h2>
                <p>{{location}}</p>
                <p>{{bio}}</p>
                {{#if isUser}}
                <form action="/pets/{{id}}" method="post" id="AddFriendForm" data-userId="{{userId}}">
                    <input type="hidden" value="{{id}}" name="friendPetId" id="FriendPetId"/>
                    <input type="submit" value="Add Friend" id="SubmitFriend" class="btn btn-default" data-toggle="modal" data-target="#FriendsModal" />
                </form>
                {{/if}}
            </div>
            <div class="col-md-9">
                <ul class="nav nav-tabs pet-margin-b-sm">
                    <li class="nav-item">
                        <a id="view-pets" class="nav-link section-change active" data-section="#Owners">Owners</a>
                    </li>

                    <li class="nav-item">
                        <a id="view-friends" class="nav-link section-change" data-section="#Friends">Friends</a>
                    </li>
                </ul>

                <section id="Owners">
                    <div class="row">
                        <div class="col">
                            <h2 class="text-left" style="display: inline-block">Owners</h2>
                        </div>
                    </div>
                    <div class="row justify-content-center">
                        <div class="card-deck col-lg-6">
                            <div class="card">
                                <img class="card-img-top img-fluid" src="{{ownerPicture}}" alt="{{ownerName}}" />
                                <div class="card-body">
                                    <h4 class="card-title text-center">{{ownerName}}, {{ownerAge}}</h4>
                                    <a href="/owners/{{ownerId}}" class="btn btn-primary">View Profile</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="Posts" class="d-none">
                    <div class="row">
                        <div class="col">
                            <h2 class="text-left" style="display: inline-block">Posts</h2>
                        </div>
                    </div>
                    <div class="row justify-content-center">
                        <div class="col">Coming Soon</div>
                    </div>
                </section>

                <section id="Friends" class="d-none">
                    <div class="row">
                        <div class="col">
                            <h2 class="text-left" style="display: inline-block">Friends</h2>
                            {{#each friendPets}}
                                <div class="card float-right" style="width: 20rem;">
                                    <img class="card-img-top" src="{{picture}}" alt="Card image cap">
                                    <div class="card-body">
                                        <h4 class="card-title">{{name}}</h4>
                                        <p class="card-text">{{bio}}</p>
                                        <a href="/pets/{{id}}" class="btn btn-primary">View Profile</a>
                                    </div>
                                </div>
                            {{/each}}
                        </div>
                    </div>
                    <div class="row">
                        {{#each friendPets}}
                        <div class="col-md-6">
                            <div class="card float-right" style="width: 20rem;">
                                <img class="card-img-top" src="{{picture}}" alt="Card image cap">
                                <div class="card-body">
                                    <h4 class="card-title">{{name}}</h4>
                                    <p class="card-text">{{bio}}</p>
                                    <a href="/pets/{{id}}" class="btn btn-primary">View Profile</a>
                                </div>
                            </div>
                        </div>
                        {{/each}}
                    </div>
                </section>


            </div>
        </div>

        {{#if myFriendablePets}}
        <section id="PetFriends">
            <div class="row">
                <div class="col-md-6">
                    {{#each mypets}}
                        <form action="/api/friendships" method="post">  
                            <div class="card float-right" style="width: 20rem;">
                            <img class="card-img-top" src="{{picture}}" alt="Card image cap">
                            <div class="card-body">
                                <h4 class="card-title">{{name}}</h4>
                                <p class="card-text">{{bio}}</p>
                                <input type="hidden" name="friendPetId" value={{../friendPetId}}>
                                <input type="hidden" name="myPetId" value={{id}}>
                                <input type="submit" value="Make Friendship" id="submit"/>
                            </div>
                            </div>
                        </form> 
                    {{/each}}
                </div>
            </div>
        </section>
        {{/if}}

        {{#if myNonFriendablePets}}
        <section id="PetFriends">
            <div class="row">
                <div class="col-md-6">
                    {{#each mypets}}
                        <form action="/api/friendships" method="post">  
                            <div class="card float-right" style="width: 20rem;">
                            <img class="card-img-top" src="{{picture}}" alt="Card image cap">
                            <div class="card-body">
                                <h4 class="card-title">{{name}}</h4>
                                <p class="card-text">{{bio}}</p>
                                <input type="hidden" name="friendPetId" value={{../friendPetId}}>
                                <input type="hidden" name="myPetId" value={{id}}>
                                <input type="submit" value="Already Friends" id="submit"/>
                            </div>
                            </div>
                        </form> 
                    {{/each}}
                </div>
            </div>
        </section>
        {{/if}}

        <div id="FriendsModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="friendModal" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="container-fluid">
                        <h3 class="modal-title">Which Pet Would You Like To Match With?</h3>
                        <div id="AsyncFriends" class="row"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>